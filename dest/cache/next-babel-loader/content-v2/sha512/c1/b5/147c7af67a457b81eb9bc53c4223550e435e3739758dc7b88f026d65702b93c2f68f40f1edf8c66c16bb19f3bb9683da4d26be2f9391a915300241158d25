{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/pc/Desktop/\\u6155\\u8BFE\\u5B66\\u4E60/nextjs-create-app/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/pc/Desktop/\\u6155\\u8BFE\\u5B66\\u4E60/nextjs-create-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _Row from \"antd/lib/row\";\nimport _Pagination from \"antd/lib/pagination\";\nimport _Col from \"antd/lib/col\";\nimport _List from \"antd/lib/list\";\nimport _defineProperty from \"C:/Users/pc/Desktop/\\u6155\\u8BFE\\u5B66\\u4E60/nextjs-create-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"C:/Users/pc/Desktop/\\u6155\\u8BFE\\u5B66\\u4E60/nextjs-create-app/node_modules/next/node_modules/@babel/runtime/helpers/esm/extends\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\\\u6155\\u8BFE\\u5B66\\u4E60\\\\nextjs-create-app\\\\pages\\\\search.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useCallback, memo, isValidElement, useEffect } from \"react\";\nimport { withRouter } from \"next/router\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\n/**\r\n * sort: 排序方式\r\n * order: 排序顺序\r\n * lang: 仓库的项目开发主语言\r\n * page: 分页页面\r\n *\r\n */\n\nvar api = require(\"../lib/api\");\n\nimport Repo from \"../components/Repo\"; // 搜索条件\n\nvar LANGUAGES = [\"JavaScript\", \"HTML\", \"CSS\", \"TypeScript\", \"Java\", \"Rust\"];\nvar SORT_TYPE = [{\n  name: \"Best Match\"\n}, {\n  name: \"Most Stars\",\n  value: \"stars\",\n  order: \"desc\"\n}, {\n  name: \"Fewest Stars\",\n  value: \"stars\",\n  order: \"asc\"\n}, {\n  name: \"Most Forks\",\n  value: \"forks\",\n  order: \"desc\"\n}, {\n  name: \"Fewest Stars\",\n  value: \"forks\",\n  order: \"asc\"\n}];\nvar selectedItemStyle = {\n  borderLeft: \"2px solid #e36209\",\n  fontWeight: 100\n}; // 这是一个纯粹的方法，方法一旦声明，不存在任何副作用\n// const doSearch = useCallback((config) => {\n//   Router.push({\n//     pathname: \"/search\",\n//     query: config,\n//   });\n// }, []);\n// react 是一个组件化的框架，组件依靠 props 和 states 进行运行的，如果能够抽象成 props 那么就可以重新申明一个组件，让组件帮忙使用，在代码维护变得更加简单\n// 防止了组件在点击的过程中重新声明渲染\n// FilterLink 组件是纯粹根据 props 进行更新的，可以 memo 进行优化，当 props 没有进行变化的时候，这个组件不会被重新渲染\n\nvar per_page = 20;\nvar FilterLink = /*#__PURE__*/memo(_c = function _c(_ref) {\n  var name = _ref.name,\n      query = _ref.query,\n      lang = _ref.lang,\n      sort = _ref.sort,\n      order = _ref.order,\n      page = _ref.page;\n  var queryString = \"?query=\".concat(query);\n  if (lang) queryString += \"&lang=\".concat(lang);\n  if (sort) queryString += \"&sort=\".concat(sort, \"&order=\").concat(order || \"desc\");\n  if (page) queryString += \"&page=\".concat(page);\n  queryString += \"&per_page=\".concat(per_page); // if (page) queryString += `&page=${page}`;\n  // const doSearch = (config) => {\n  //   Router.push({\n  //     pathname: \"/search\",\n  //     query: {\n  //       query,\n  //       lang,\n  //       sort,\n  //       order,\n  //     },\n  //   });\n  // };\n  // 注意 a 标签不放链接，很难去做 SEO ，因为 SEO 会解析 HTML 的内容\n\n  return /*#__PURE__*/_jsxDEV(Link, {\n    href: \"/search\".concat(queryString),\n    children: /*#__PURE__*/isValidElement(name) ? name : /*#__PURE__*/_jsxDEV(\"a\", {\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 38\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, _this);\n});\n_c2 = FilterLink;\n\nvar noop = function noop() {};\n\nfunction Search(_ref2) {\n  _s();\n\n  var _this2 = this;\n\n  var router = _ref2.router,\n      repos = _ref2.repos;\n  console.log(repos); // 注意这些数据都没有在 state 里面去创建，希望是这些页面显示的内容完全根据 url 来定的，使得整个组件是个受控的组件，不会产生任何的副作用。\n  // 该路由是 withRouter 传递过来的\n\n  var querys = _extends({}, router.query);\n\n  var _router$query = router.query,\n      sort = _router$query.sort,\n      order = _router$query.order,\n      lang = _router$query.lang,\n      page = _router$query.page; // 执行这个插入，每次页面渲染的时候，都会去调用它\n\n  useEffect(function () {}); // 用于拼接路径的方法\n  // 注意语言变化了，但是当时选中了一个排序方式，在语言变化的时候，不应该变化其排序，所以要把排序的参数放在 query 里面。\n  // const handleLanguageChange = (language) => {\n  //   Router.push({\n  //     pathname: \"/search\",\n  //     query: {\n  //       query,\n  //       lang: language,\n  //       sort,\n  //       order,\n  //     },\n  //   });\n  // };\n  // const handleSortChange = (sort) => {\n  //   Router.push({\n  //     pathname: \"/search\",\n  //     query: {\n  //       query,\n  //       lang,\n  //       sort: sort.value,\n  //       order: sort.order,\n  //     },\n  //   });\n  // };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"jsx-2060511232\" + \" \" + \"root\",\n    children: [/*#__PURE__*/_jsxDEV(_Row, {\n      gutter: 20,\n      children: [/*#__PURE__*/_jsxDEV(_Col, {\n        gutter: 6,\n        children: [/*#__PURE__*/_jsxDEV(_List, {\n          bordered: true,\n          header: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"jsx-2060511232\" + \" \" + \"list-header\",\n            children: \"\\u8BED\\u8A00\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 21\n          }, this),\n          style: {\n            marginBottom: 20\n          },\n          dataSource: LANGUAGES,\n          renderItem: function renderItem(item) {\n            var selected = lang === item;\n            return /*#__PURE__*/_jsxDEV(_List.Item, {\n              style: selected ? selectedItemStyle : null,\n              children: selected ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"jsx-2060511232\",\n                children: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 21\n              }, _this2) : /*#__PURE__*/_jsxDEV(FilterLink, _objectSpread(_objectSpread({}, querys), {}, {\n                lang: item,\n                name: item\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 21\n              }, _this2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 17\n            }, _this2);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(_List, {\n          bordered: true,\n          header: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"jsx-2060511232\" + \" \" + \"list-header\",\n            children: \"\\u6392\\u5E8F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 21\n          }, this),\n          style: {\n            marginBottom: 20\n          },\n          dataSource: SORT_TYPE,\n          renderItem: function renderItem(item) {\n            var selected = false;\n\n            if (item.name === \"Best Match\" && !sort) {\n              selected = true;\n            } else if (item.value === sort && item.order === order) {\n              selected = true;\n            }\n\n            return /*#__PURE__*/_jsxDEV(_List.Item, {\n              style: selected ? selectedItemStyle : null,\n              children: selected ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"jsx-2060511232\",\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 21\n              }, _this2) : /*#__PURE__*/_jsxDEV(FilterLink, _objectSpread(_objectSpread({}, querys), {}, {\n                sort: item.value,\n                order: item.order,\n                name: item.name\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 21\n              }, _this2)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, _this2);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(_Col, {\n        span: 18,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"jsx-2060511232\" + \" \" + \"repos-title\",\n          children: [repos.total_count, \" \\u4E2A\\u4ED3\\u5E93\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), repos.items.map(function (repo) {\n          return /*#__PURE__*/_jsxDEV(Repo, {\n            repo: repo\n          }, repo.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, _this2);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-2060511232\" + \" \" + \"pagination\",\n          children: /*#__PURE__*/_jsxDEV(_Pagination, {\n            pageSize: per_page,\n            current: Number(page) || 1,\n            total: 1000,\n            onChange: noop,\n            itemRender: function itemRender(page, type, ol) {\n              var p = type === \"page\" ? page : type === \"prev\" ? page - 1 : page + 1;\n              var name = type === \"page\" ? page : ol;\n              return /*#__PURE__*/_jsxDEV(FilterLink, _objectSpread(_objectSpread({}, querys), {}, {\n                page: p,\n                name: name\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 24\n              }, _this2);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"2060511232\",\n      children: \".root.jsx-2060511232{padding:20px 0;}.list-header.jsx-2060511232{font-weight:800;font-size:16px;}.repos-title.jsx-2060511232{border-bottom:1px solid #eee;font-size:24px;line-height:50px;}.pagination.jsx-2060511232{padding:20px;text-align:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXOaFleivvuWtpuS5oFxcbmV4dGpzLWNyZWF0ZS1hcHBcXHBhZ2VzXFxzZWFyY2guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBb05rQixBQUcwQixBQUdDLEFBSWEsQUFLaEIsYUFDSyxFQVpwQixDQUdpQixhQUlBLEVBSGpCLEFBU0EsYUFMbUIsaUJBQ25CIiwiZmlsZSI6IkM6XFxVc2Vyc1xccGNcXERlc2t0b3BcXOaFleivvuWtpuS5oFxcbmV4dGpzLWNyZWF0ZS1hcHBcXHBhZ2VzXFxzZWFyY2guanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjaywgbWVtbywgaXNWYWxpZEVsZW1lbnQsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xyXG5cclxuaW1wb3J0IHsgd2l0aFJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xyXG5cclxuaW1wb3J0IHsgUm93LCBDb2wsIExpc3QsIFBhZ2luYXRpb24gfSBmcm9tIFwiYW50ZFwiO1xyXG5cclxuaW1wb3J0IFJvdXRlciBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcclxuXHJcbmltcG9ydCBMaW5rIGZyb20gXCJuZXh0L2xpbmtcIjtcclxuLyoqXHJcbiAqIHNvcnQ6IOaOkuW6j+aWueW8j1xyXG4gKiBvcmRlcjog5o6S5bqP6aG65bqPXHJcbiAqIGxhbmc6IOS7k+W6k+eahOmhueebruW8gOWPkeS4u+ivreiogFxyXG4gKiBwYWdlOiDliIbpobXpobXpnaJcclxuICpcclxuICovXHJcblxyXG5jb25zdCBhcGkgPSByZXF1aXJlKFwiLi4vbGliL2FwaVwiKTtcclxuXHJcbmltcG9ydCBSZXBvIGZyb20gXCIuLi9jb21wb25lbnRzL1JlcG9cIjtcclxuXHJcbi8vIOaQnOe0ouadoeS7tlxyXG5jb25zdCBMQU5HVUFHRVMgPSBbXCJKYXZhU2NyaXB0XCIsIFwiSFRNTFwiLCBcIkNTU1wiLCBcIlR5cGVTY3JpcHRcIiwgXCJKYXZhXCIsIFwiUnVzdFwiXTtcclxuXHJcbmNvbnN0IFNPUlRfVFlQRSA9IFtcclxuICB7IG5hbWU6IFwiQmVzdCBNYXRjaFwiIH0sXHJcbiAgeyBuYW1lOiBcIk1vc3QgU3RhcnNcIiwgdmFsdWU6IFwic3RhcnNcIiwgb3JkZXI6IFwiZGVzY1wiIH0sXHJcbiAgeyBuYW1lOiBcIkZld2VzdCBTdGFyc1wiLCB2YWx1ZTogXCJzdGFyc1wiLCBvcmRlcjogXCJhc2NcIiB9LFxyXG4gIHsgbmFtZTogXCJNb3N0IEZvcmtzXCIsIHZhbHVlOiBcImZvcmtzXCIsIG9yZGVyOiBcImRlc2NcIiB9LFxyXG4gIHsgbmFtZTogXCJGZXdlc3QgU3RhcnNcIiwgdmFsdWU6IFwiZm9ya3NcIiwgb3JkZXI6IFwiYXNjXCIgfSxcclxuXTtcclxuXHJcbmNvbnN0IHNlbGVjdGVkSXRlbVN0eWxlID0ge1xyXG4gIGJvcmRlckxlZnQ6IFwiMnB4IHNvbGlkICNlMzYyMDlcIixcclxuICBmb250V2VpZ2h0OiAxMDAsXHJcbn07XHJcblxyXG4vLyDov5nmmK/kuIDkuKrnuq/nsrnnmoTmlrnms5XvvIzmlrnms5XkuIDml6blo7DmmI7vvIzkuI3lrZjlnKjku7vkvZXlia/kvZznlKhcclxuLy8gY29uc3QgZG9TZWFyY2ggPSB1c2VDYWxsYmFjaygoY29uZmlnKSA9PiB7XHJcbi8vICAgUm91dGVyLnB1c2goe1xyXG4vLyAgICAgcGF0aG5hbWU6IFwiL3NlYXJjaFwiLFxyXG4vLyAgICAgcXVlcnk6IGNvbmZpZyxcclxuLy8gICB9KTtcclxuLy8gfSwgW10pO1xyXG5cclxuLy8gcmVhY3Qg5piv5LiA5Liq57uE5Lu25YyW55qE5qGG5p6277yM57uE5Lu25L6d6Z2gIHByb3BzIOWSjCBzdGF0ZXMg6L+b6KGM6L+Q6KGM55qE77yM5aaC5p6c6IO95aSf5oq96LGh5oiQIHByb3BzIOmCo+S5iOWwseWPr+S7pemHjeaWsOeUs+aYjuS4gOS4que7hOS7tu+8jOiuqee7hOS7tuW4ruW/meS9v+eUqO+8jOWcqOS7o+eggee7tOaKpOWPmOW+l+abtOWKoOeugOWNlVxyXG4vLyDpmLLmraLkuobnu4Tku7blnKjngrnlh7vnmoTov4fnqIvkuK3ph43mlrDlo7DmmI7muLLmn5NcclxuLy8gRmlsdGVyTGluayDnu4Tku7bmmK/nuq/nsrnmoLnmja4gcHJvcHMg6L+b6KGM5pu05paw55qE77yM5Y+v5LulIG1lbW8g6L+b6KGM5LyY5YyW77yM5b2TIHByb3BzIOayoeaciei/m+ihjOWPmOWMlueahOaXtuWAme+8jOi/meS4que7hOS7tuS4jeS8muiiq+mHjeaWsOa4suafk1xyXG5cclxuY29uc3QgcGVyX3BhZ2UgPSAyMDtcclxuY29uc3QgRmlsdGVyTGluayA9IG1lbW8oKHsgbmFtZSwgcXVlcnksIGxhbmcsIHNvcnQsIG9yZGVyLCBwYWdlIH0pID0+IHtcclxuICBsZXQgcXVlcnlTdHJpbmcgPSBgP3F1ZXJ5PSR7cXVlcnl9YDtcclxuICBpZiAobGFuZykgcXVlcnlTdHJpbmcgKz0gYCZsYW5nPSR7bGFuZ31gO1xyXG4gIGlmIChzb3J0KSBxdWVyeVN0cmluZyArPSBgJnNvcnQ9JHtzb3J0fSZvcmRlcj0ke29yZGVyIHx8IFwiZGVzY1wifWA7XHJcbiAgaWYgKHBhZ2UpIHF1ZXJ5U3RyaW5nICs9IGAmcGFnZT0ke3BhZ2V9YDtcclxuXHJcbiAgcXVlcnlTdHJpbmcgKz0gYCZwZXJfcGFnZT0ke3Blcl9wYWdlfWA7XHJcbiAgLy8gaWYgKHBhZ2UpIHF1ZXJ5U3RyaW5nICs9IGAmcGFnZT0ke3BhZ2V9YDtcclxuXHJcbiAgLy8gY29uc3QgZG9TZWFyY2ggPSAoY29uZmlnKSA9PiB7XHJcbiAgLy8gICBSb3V0ZXIucHVzaCh7XHJcbiAgLy8gICAgIHBhdGhuYW1lOiBcIi9zZWFyY2hcIixcclxuICAvLyAgICAgcXVlcnk6IHtcclxuICAvLyAgICAgICBxdWVyeSxcclxuICAvLyAgICAgICBsYW5nLFxyXG4gIC8vICAgICAgIHNvcnQsXHJcbiAgLy8gICAgICAgb3JkZXIsXHJcbiAgLy8gICAgIH0sXHJcbiAgLy8gICB9KTtcclxuICAvLyB9O1xyXG4gIC8vIOazqOaEjyBhIOagh+etvuS4jeaUvumTvuaOpe+8jOW+iOmavuWOu+WBmiBTRU8g77yM5Zug5Li6IFNFTyDkvJrop6PmnpAgSFRNTCDnmoTlhoXlrrlcclxuICByZXR1cm4gKFxyXG4gICAgPExpbmsgaHJlZj17YC9zZWFyY2gke3F1ZXJ5U3RyaW5nfWB9PlxyXG4gICAgICB7LyogaXNWYWxpZEVsZW1lbnQg5piv55So5p2l5Yik5pat5piv5ZCm5Li65LiA5Liq5qCH562+ICovfVxyXG4gICAgICB7aXNWYWxpZEVsZW1lbnQobmFtZSkgPyBuYW1lIDogPGE+e25hbWV9PC9hPn1cclxuICAgIDwvTGluaz5cclxuICApO1xyXG59KTtcclxuXHJcbmNvbnN0IG5vb3AgPSAoKSA9PiB7fTtcclxuXHJcbmZ1bmN0aW9uIFNlYXJjaCh7IHJvdXRlciwgcmVwb3MgfSkge1xyXG4gIGNvbnNvbGUubG9nKHJlcG9zKTtcclxuICAvLyDms6jmhI/ov5nkupvmlbDmja7pg73msqHmnInlnKggc3RhdGUg6YeM6Z2i5Y675Yib5bu677yM5biM5pyb5piv6L+Z5Lqb6aG16Z2i5pi+56S655qE5YaF5a655a6M5YWo5qC55o2uIHVybCDmnaXlrprnmoTvvIzkvb/lvpfmlbTkuKrnu4Tku7bmmK/kuKrlj5fmjqfnmoTnu4Tku7bvvIzkuI3kvJrkuqfnlJ/ku7vkvZXnmoTlia/kvZznlKjjgIJcclxuXHJcbiAgLy8g6K+l6Lev55Sx5pivIHdpdGhSb3V0ZXIg5Lyg6YCS6L+H5p2l55qEXHJcbiAgY29uc3QgeyAuLi5xdWVyeXMgfSA9IHJvdXRlci5xdWVyeTtcclxuICBjb25zdCB7IHNvcnQsIG9yZGVyLCBsYW5nLCBwYWdlIH0gPSByb3V0ZXIucXVlcnk7XHJcblxyXG4gIC8vIOaJp+ihjOi/meS4quaPkuWFpe+8jOavj+asoemhtemdoua4suafk+eahOaXtuWAme+8jOmDveS8muWOu+iwg+eUqOWug1xyXG4gIHVzZUVmZmVjdCgoKSA9PiB7fSk7XHJcblxyXG4gIC8vIOeUqOS6juaLvOaOpei3r+W+hOeahOaWueazlVxyXG4gIC8vIOazqOaEj+ivreiogOWPmOWMluS6hu+8jOS9huaYr+W9k+aXtumAieS4reS6huS4gOS4quaOkuW6j+aWueW8j++8jOWcqOivreiogOWPmOWMlueahOaXtuWAme+8jOS4jeW6lOivpeWPmOWMluWFtuaOkuW6j++8jOaJgOS7peimgeaKiuaOkuW6j+eahOWPguaVsOaUvuWcqCBxdWVyeSDph4zpnaLjgIJcclxuICAvLyBjb25zdCBoYW5kbGVMYW5ndWFnZUNoYW5nZSA9IChsYW5ndWFnZSkgPT4ge1xyXG4gIC8vICAgUm91dGVyLnB1c2goe1xyXG4gIC8vICAgICBwYXRobmFtZTogXCIvc2VhcmNoXCIsXHJcbiAgLy8gICAgIHF1ZXJ5OiB7XHJcbiAgLy8gICAgICAgcXVlcnksXHJcbiAgLy8gICAgICAgbGFuZzogbGFuZ3VhZ2UsXHJcbiAgLy8gICAgICAgc29ydCxcclxuICAvLyAgICAgICBvcmRlcixcclxuICAvLyAgICAgfSxcclxuICAvLyAgIH0pO1xyXG4gIC8vIH07XHJcbiAgLy8gY29uc3QgaGFuZGxlU29ydENoYW5nZSA9IChzb3J0KSA9PiB7XHJcbiAgLy8gICBSb3V0ZXIucHVzaCh7XHJcbiAgLy8gICAgIHBhdGhuYW1lOiBcIi9zZWFyY2hcIixcclxuICAvLyAgICAgcXVlcnk6IHtcclxuICAvLyAgICAgICBxdWVyeSxcclxuICAvLyAgICAgICBsYW5nLFxyXG4gIC8vICAgICAgIHNvcnQ6IHNvcnQudmFsdWUsXHJcbiAgLy8gICAgICAgb3JkZXI6IHNvcnQub3JkZXIsXHJcbiAgLy8gICAgIH0sXHJcbiAgLy8gICB9KTtcclxuICAvLyB9O1xyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJyb290XCI+XHJcbiAgICAgIDxSb3cgZ3V0dGVyPXsyMH0+XHJcbiAgICAgICAgPENvbCBndXR0ZXI9ezZ9PlxyXG4gICAgICAgICAgPExpc3RcclxuICAgICAgICAgICAgYm9yZGVyZWRcclxuICAgICAgICAgICAgaGVhZGVyPXs8c3BhbiBjbGFzc05hbWU9XCJsaXN0LWhlYWRlclwiPuivreiogDwvc3Bhbj59XHJcbiAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogMjAgfX1cclxuICAgICAgICAgICAgZGF0YVNvdXJjZT17TEFOR1VBR0VTfVxyXG4gICAgICAgICAgICByZW5kZXJJdGVtPXsoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gbGFuZyA9PT0gaXRlbTtcclxuICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPExpc3QuSXRlbSBzdHlsZT17c2VsZWN0ZWQgPyBzZWxlY3RlZEl0ZW1TdHlsZSA6IG51bGx9PlxyXG4gICAgICAgICAgICAgICAgICB7c2VsZWN0ZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2l0ZW19PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgICAgICAgIDxGaWx0ZXJMaW5rIHsuLi5xdWVyeXN9IGxhbmc9e2l0ZW19IG5hbWU9e2l0ZW19IC8+XHJcbiAgICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICAgIHsvKiA8YVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGRvU2VhcmNoKHsgc29ydCwgb3JkZXIsIHF1ZXJ5LCBsYW5nOiBpdGVtIH0pfVxyXG4gICAgICAgICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgICAgICAge2l0ZW19XHJcbiAgICAgICAgICAgICAgICAgIDwvYT4gKi99XHJcbiAgICAgICAgICAgICAgICA8L0xpc3QuSXRlbT5cclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICAgIDxMaXN0XHJcbiAgICAgICAgICAgIGJvcmRlcmVkXHJcbiAgICAgICAgICAgIGhlYWRlcj17PHNwYW4gY2xhc3NOYW1lPVwibGlzdC1oZWFkZXJcIj7mjpLluo88L3NwYW4+fVxyXG4gICAgICAgICAgICBzdHlsZT17eyBtYXJnaW5Cb3R0b206IDIwIH19XHJcbiAgICAgICAgICAgIGRhdGFTb3VyY2U9e1NPUlRfVFlQRX1cclxuICAgICAgICAgICAgcmVuZGVySXRlbT17KGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSBcIkJlc3QgTWF0Y2hcIiAmJiAhc29ydCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS52YWx1ZSA9PT0gc29ydCAmJiBpdGVtLm9yZGVyID09PSBvcmRlcikge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgPExpc3QuSXRlbSBzdHlsZT17c2VsZWN0ZWQgPyBzZWxlY3RlZEl0ZW1TdHlsZSA6IG51bGx9PlxyXG4gICAgICAgICAgICAgICAgICB7c2VsZWN0ZWQgPyAoXHJcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+e2l0ZW0ubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgICAgPEZpbHRlckxpbmtcclxuICAgICAgICAgICAgICAgICAgICAgIHsuLi5xdWVyeXN9XHJcbiAgICAgICAgICAgICAgICAgICAgICBzb3J0PXtpdGVtLnZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgb3JkZXI9e2l0ZW0ub3JkZXJ9XHJcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtpdGVtLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgKX1cclxuXHJcbiAgICAgICAgICAgICAgICAgIHsvKiA8YVxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICBkb1NlYXJjaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvcnQ6IGl0ZW0udmFsdWUgfHwgXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IGl0ZW0ub3JkZXIgfHwgXCJcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAgICAgIHtpdGVtLm5hbWV9XHJcbiAgICAgICAgICAgICAgICAgIDwvYT4gKi99XHJcbiAgICAgICAgICAgICAgICA8L0xpc3QuSXRlbT5cclxuICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9fVxyXG4gICAgICAgICAgLz5cclxuICAgICAgICA8L0NvbD5cclxuICAgICAgICA8Q29sIHNwYW49ezE4fT5cclxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJyZXBvcy10aXRsZVwiPntyZXBvcy50b3RhbF9jb3VudH0g5Liq5LuT5bqTPC9oMz5cclxuICAgICAgICAgIHtyZXBvcy5pdGVtcy5tYXAoKHJlcG8pID0+IChcclxuICAgICAgICAgICAgPFJlcG8gcmVwbz17cmVwb30ga2V5PXtyZXBvLmlkfSAvPlxyXG4gICAgICAgICAgKSl9XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2luYXRpb25cIj5cclxuICAgICAgICAgICAgey8qIGl0ZW1SZW5kZXIg5bCx5piv5oiR5Lus5q+P5LiqIGl0ZW0g5pi+56S655qE5YaF5a6577yMaXRlbVJlbmRlciDlsLHmmK/mr4/kuKogcGFnZSDlr7nlupTnmoTpobXnoIHvvIx0eXBlIOWwseaYr+i/meS4quWIhumhteWQkeWJjei/mOaYr+WQkeWQjui/mOaYr+S4remXtOeahOaMiemSru+8jG9sIOWwseaYr+exu+S8vOS6jiBpY29uIO+8jOazqOaEjyBwYWdlIO+8jCB0eXBlIOmDveaYryBhIOagh+etviAgKi99XHJcbiAgICAgICAgICAgIDxQYWdpbmF0aW9uXHJcbiAgICAgICAgICAgICAgcGFnZVNpemU9e3Blcl9wYWdlfVxyXG4gICAgICAgICAgICAgIGN1cnJlbnQ9e051bWJlcihwYWdlKSB8fCAxfVxyXG4gICAgICAgICAgICAgIHRvdGFsPXsxMDAwfVxyXG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtub29wfVxyXG4gICAgICAgICAgICAgIGl0ZW1SZW5kZXI9eyhwYWdlLCB0eXBlLCBvbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcCA9XHJcbiAgICAgICAgICAgICAgICAgIHR5cGUgPT09IFwicGFnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgPyBwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgOiB0eXBlID09PSBcInByZXZcIlxyXG4gICAgICAgICAgICAgICAgICAgID8gcGFnZSAtIDFcclxuICAgICAgICAgICAgICAgICAgICA6IHBhZ2UgKyAxO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHR5cGUgPT09IFwicGFnZVwiID8gcGFnZSA6IG9sO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxGaWx0ZXJMaW5rIHsuLi5xdWVyeXN9IHBhZ2U9e3B9IG5hbWU9e25hbWV9IC8+O1xyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L0NvbD5cclxuICAgICAgPC9Sb3c+XHJcbiAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICBwYWRkaW5nOiAyMHB4IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC5saXN0LWhlYWRlciB7XHJcbiAgICAgICAgICBmb250LXdlaWdodDogODAwO1xyXG4gICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgICAgIH1cclxuICAgICAgICAucmVwb3MtdGl0bGUge1xyXG4gICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlZWU7XHJcbiAgICAgICAgICBmb250LXNpemU6IDI0cHg7XHJcbiAgICAgICAgICBsaW5lLWhlaWdodDogNTBweDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLnBhZ2luYXRpb24ge1xyXG4gICAgICAgICAgcGFkZGluZzogMjBweDtcclxuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICB9XHJcbiAgICAgIGB9PC9zdHlsZT5cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuXHJcblNlYXJjaC5nZXRJbml0aWFsUHJvcHMgPSBhc3luYyAoY3R4KSA9PiB7XHJcbiAgY29uc3QgeyBxdWVyeSwgc29ydCwgbGFuZywgb3JkZXIsIHBhZ2UgfSA9IGN0eC5xdWVyeTtcclxuICBpZiAoIXF1ZXJ5KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXBvczoge1xyXG4gICAgICAgIHRvdGFsX2NvdW50OiAwLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9XHJcbiAgbGV0IHF1ZXJ5U3RyaW5nID0gYD9xPSR7cXVlcnl9YDtcclxuICBpZiAobGFuZykgcXVlcnlTdHJpbmcgKz0gYCtsYW5ndWFnZToke2xhbmd9YDtcclxuICBpZiAoc29ydCkgcXVlcnlTdHJpbmcgKz0gYCZzb3J0PSR7c29ydH0mb3JkZXI9JHtvcmRlciB8fCBcImRlc2NcIn1gO1xyXG4gIGlmIChwYWdlKSBxdWVyeVN0cmluZyArPSBgJnBhZ2U9JHtwYWdlfWA7XHJcbiAgcXVlcnlTdHJpbmcgKz0gYCZwZXJfcGFnZT0ke3Blcl9wYWdlfWA7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBpLnJlcXVlc3QoXHJcbiAgICB7XHJcbiAgICAgIHVybDogYC9zZWFyY2gvcmVwb3NpdG9yaWVzJHtxdWVyeVN0cmluZ31gLFxyXG4gICAgfSxcclxuICAgIGN0eC5yZXEsXHJcbiAgICBjdHgucmVzXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHJlcG9zOiByZXN1bHQuZGF0YSxcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgd2l0aFJvdXRlcihTZWFyY2gpO1xyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\pc\\\\\\\\Desktop\\\\\\\\\\u6155\\u8BFE\\u5B66\\u4E60\\\\\\\\nextjs-create-app\\\\\\\\pages\\\\\\\\search.js */\"\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Search, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c3 = Search;\n\nSearch.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var _ctx$query, query, sort, lang, order, page, queryString, result;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _ctx$query = ctx.query, query = _ctx$query.query, sort = _ctx$query.sort, lang = _ctx$query.lang, order = _ctx$query.order, page = _ctx$query.page;\n\n            if (query) {\n              _context.next = 3;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              repos: {\n                total_count: 0\n              }\n            });\n\n          case 3:\n            queryString = \"?q=\".concat(query);\n            if (lang) queryString += \"+language:\".concat(lang);\n            if (sort) queryString += \"&sort=\".concat(sort, \"&order=\").concat(order || \"desc\");\n            if (page) queryString += \"&page=\".concat(page);\n            queryString += \"&per_page=\".concat(per_page);\n            _context.next = 10;\n            return api.request({\n              url: \"/search/repositories\".concat(queryString)\n            }, ctx.req, ctx.res);\n\n          case 10:\n            result = _context.sent;\n            return _context.abrupt(\"return\", {\n              repos: result.data\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default _c4 = withRouter(Search);\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"FilterLink$memo\");\n$RefreshReg$(_c2, \"FilterLink\");\n$RefreshReg$(_c3, \"Search\");\n$RefreshReg$(_c4, \"%default%\");","map":{"version":3,"sources":["C:/Users/pc/Desktop/慕课学习/nextjs-create-app/pages/search.js"],"names":["useCallback","memo","isValidElement","useEffect","withRouter","Router","Link","api","require","Repo","LANGUAGES","SORT_TYPE","name","value","order","selectedItemStyle","borderLeft","fontWeight","per_page","FilterLink","query","lang","sort","page","queryString","noop","Search","router","repos","console","log","querys","marginBottom","item","selected","total_count","items","map","repo","id","Number","type","ol","p","getInitialProps","ctx","request","url","req","res","result","data"],"mappings":"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","sourcesContent":["import { useCallback, memo, isValidElement, useEffect } from \"react\";\r\n\r\nimport { withRouter } from \"next/router\";\r\n\r\nimport { Row, Col, List, Pagination } from \"antd\";\r\n\r\nimport Router from \"next/router\";\r\n\r\nimport Link from \"next/link\";\r\n/**\r\n * sort: 排序方式\r\n * order: 排序顺序\r\n * lang: 仓库的项目开发主语言\r\n * page: 分页页面\r\n *\r\n */\r\n\r\nconst api = require(\"../lib/api\");\r\n\r\nimport Repo from \"../components/Repo\";\r\n\r\n// 搜索条件\r\nconst LANGUAGES = [\"JavaScript\", \"HTML\", \"CSS\", \"TypeScript\", \"Java\", \"Rust\"];\r\n\r\nconst SORT_TYPE = [\r\n  { name: \"Best Match\" },\r\n  { name: \"Most Stars\", value: \"stars\", order: \"desc\" },\r\n  { name: \"Fewest Stars\", value: \"stars\", order: \"asc\" },\r\n  { name: \"Most Forks\", value: \"forks\", order: \"desc\" },\r\n  { name: \"Fewest Stars\", value: \"forks\", order: \"asc\" },\r\n];\r\n\r\nconst selectedItemStyle = {\r\n  borderLeft: \"2px solid #e36209\",\r\n  fontWeight: 100,\r\n};\r\n\r\n// 这是一个纯粹的方法，方法一旦声明，不存在任何副作用\r\n// const doSearch = useCallback((config) => {\r\n//   Router.push({\r\n//     pathname: \"/search\",\r\n//     query: config,\r\n//   });\r\n// }, []);\r\n\r\n// react 是一个组件化的框架，组件依靠 props 和 states 进行运行的，如果能够抽象成 props 那么就可以重新申明一个组件，让组件帮忙使用，在代码维护变得更加简单\r\n// 防止了组件在点击的过程中重新声明渲染\r\n// FilterLink 组件是纯粹根据 props 进行更新的，可以 memo 进行优化，当 props 没有进行变化的时候，这个组件不会被重新渲染\r\n\r\nconst per_page = 20;\r\nconst FilterLink = memo(({ name, query, lang, sort, order, page }) => {\r\n  let queryString = `?query=${query}`;\r\n  if (lang) queryString += `&lang=${lang}`;\r\n  if (sort) queryString += `&sort=${sort}&order=${order || \"desc\"}`;\r\n  if (page) queryString += `&page=${page}`;\r\n\r\n  queryString += `&per_page=${per_page}`;\r\n  // if (page) queryString += `&page=${page}`;\r\n\r\n  // const doSearch = (config) => {\r\n  //   Router.push({\r\n  //     pathname: \"/search\",\r\n  //     query: {\r\n  //       query,\r\n  //       lang,\r\n  //       sort,\r\n  //       order,\r\n  //     },\r\n  //   });\r\n  // };\r\n  // 注意 a 标签不放链接，很难去做 SEO ，因为 SEO 会解析 HTML 的内容\r\n  return (\r\n    <Link href={`/search${queryString}`}>\r\n      {/* isValidElement 是用来判断是否为一个标签 */}\r\n      {isValidElement(name) ? name : <a>{name}</a>}\r\n    </Link>\r\n  );\r\n});\r\n\r\nconst noop = () => {};\r\n\r\nfunction Search({ router, repos }) {\r\n  console.log(repos);\r\n  // 注意这些数据都没有在 state 里面去创建，希望是这些页面显示的内容完全根据 url 来定的，使得整个组件是个受控的组件，不会产生任何的副作用。\r\n\r\n  // 该路由是 withRouter 传递过来的\r\n  const { ...querys } = router.query;\r\n  const { sort, order, lang, page } = router.query;\r\n\r\n  // 执行这个插入，每次页面渲染的时候，都会去调用它\r\n  useEffect(() => {});\r\n\r\n  // 用于拼接路径的方法\r\n  // 注意语言变化了，但是当时选中了一个排序方式，在语言变化的时候，不应该变化其排序，所以要把排序的参数放在 query 里面。\r\n  // const handleLanguageChange = (language) => {\r\n  //   Router.push({\r\n  //     pathname: \"/search\",\r\n  //     query: {\r\n  //       query,\r\n  //       lang: language,\r\n  //       sort,\r\n  //       order,\r\n  //     },\r\n  //   });\r\n  // };\r\n  // const handleSortChange = (sort) => {\r\n  //   Router.push({\r\n  //     pathname: \"/search\",\r\n  //     query: {\r\n  //       query,\r\n  //       lang,\r\n  //       sort: sort.value,\r\n  //       order: sort.order,\r\n  //     },\r\n  //   });\r\n  // };\r\n\r\n  return (\r\n    <div className=\"root\">\r\n      <Row gutter={20}>\r\n        <Col gutter={6}>\r\n          <List\r\n            bordered\r\n            header={<span className=\"list-header\">语言</span>}\r\n            style={{ marginBottom: 20 }}\r\n            dataSource={LANGUAGES}\r\n            renderItem={(item) => {\r\n              const selected = lang === item;\r\n              return (\r\n                <List.Item style={selected ? selectedItemStyle : null}>\r\n                  {selected ? (\r\n                    <span>{item}</span>\r\n                  ) : (\r\n                    <FilterLink {...querys} lang={item} name={item} />\r\n                  )}\r\n                  {/* <a\r\n                    onClick={() => doSearch({ sort, order, query, lang: item })}\r\n                  >\r\n                    {item}\r\n                  </a> */}\r\n                </List.Item>\r\n              );\r\n            }}\r\n          />\r\n          <List\r\n            bordered\r\n            header={<span className=\"list-header\">排序</span>}\r\n            style={{ marginBottom: 20 }}\r\n            dataSource={SORT_TYPE}\r\n            renderItem={(item) => {\r\n              let selected = false;\r\n              if (item.name === \"Best Match\" && !sort) {\r\n                selected = true;\r\n              } else if (item.value === sort && item.order === order) {\r\n                selected = true;\r\n              }\r\n              return (\r\n                <List.Item style={selected ? selectedItemStyle : null}>\r\n                  {selected ? (\r\n                    <span>{item.name}</span>\r\n                  ) : (\r\n                    <FilterLink\r\n                      {...querys}\r\n                      sort={item.value}\r\n                      order={item.order}\r\n                      name={item.name}\r\n                    />\r\n                  )}\r\n\r\n                  {/* <a\r\n                    onClick={() =>\r\n                      doSearch({\r\n                        sort: item.value || \"\",\r\n                        order: item.order || \"\",\r\n                        query,\r\n                        lang,\r\n                      })\r\n                    }\r\n                  >\r\n                    {item.name}\r\n                  </a> */}\r\n                </List.Item>\r\n              );\r\n            }}\r\n          />\r\n        </Col>\r\n        <Col span={18}>\r\n          <h3 className=\"repos-title\">{repos.total_count} 个仓库</h3>\r\n          {repos.items.map((repo) => (\r\n            <Repo repo={repo} key={repo.id} />\r\n          ))}\r\n          <div className=\"pagination\">\r\n            {/* itemRender 就是我们每个 item 显示的内容，itemRender 就是每个 page 对应的页码，type 就是这个分页向前还是向后还是中间的按钮，ol 就是类似于 icon ，注意 page ， type 都是 a 标签  */}\r\n            <Pagination\r\n              pageSize={per_page}\r\n              current={Number(page) || 1}\r\n              total={1000}\r\n              onChange={noop}\r\n              itemRender={(page, type, ol) => {\r\n                const p =\r\n                  type === \"page\"\r\n                    ? page\r\n                    : type === \"prev\"\r\n                    ? page - 1\r\n                    : page + 1;\r\n                const name = type === \"page\" ? page : ol;\r\n                return <FilterLink {...querys} page={p} name={name} />;\r\n              }}\r\n            />\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n      <style jsx>{`\r\n        .root {\r\n          padding: 20px 0;\r\n        }\r\n        .list-header {\r\n          font-weight: 800;\r\n          font-size: 16px;\r\n        }\r\n        .repos-title {\r\n          border-bottom: 1px solid #eee;\r\n          font-size: 24px;\r\n          line-height: 50px;\r\n        }\r\n        .pagination {\r\n          padding: 20px;\r\n          text-align: center;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nSearch.getInitialProps = async (ctx) => {\r\n  const { query, sort, lang, order, page } = ctx.query;\r\n  if (!query) {\r\n    return {\r\n      repos: {\r\n        total_count: 0,\r\n      },\r\n    };\r\n  }\r\n  let queryString = `?q=${query}`;\r\n  if (lang) queryString += `+language:${lang}`;\r\n  if (sort) queryString += `&sort=${sort}&order=${order || \"desc\"}`;\r\n  if (page) queryString += `&page=${page}`;\r\n  queryString += `&per_page=${per_page}`;\r\n  const result = await api.request(\r\n    {\r\n      url: `/search/repositories${queryString}`,\r\n    },\r\n    ctx.req,\r\n    ctx.res\r\n  );\r\n\r\n  return {\r\n    repos: result.data,\r\n  };\r\n};\r\n\r\nexport default withRouter(Search);\r\n"]},"metadata":{},"sourceType":"module"}